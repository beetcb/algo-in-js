<!DOCTYPE html>
<html>
  <head>
    <title>Parcel Sandbox</title>
    <meta charset="UTF-8" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div class="flex justify-center">
      <div id="app">
        <h1
          class="text-center font-bold text-2xl border-solid border-2 px-10 py-10 my-10"
        >
          0 s
        </h1>
        <button
          id="start"
          class="border-solid border-2 border-indigo-600 px-3 rounded-md"
        >
          start
        </button>
        <button
          id="clear"
          class="border-solid border-2 border-indigo-600 px-3 rounded-md"
        >
          clear
        </button>
      </div>
    </div>

    <script>
      const app = document.querySelector("#app");
      console.log(app);
      const timeDisplayer = document.querySelector(
        "#app>h1"
      );
      const storeKey = Symbol("app");
      let initialTime =
        sessionStorage.getItem(storeKey) ?? 0;

      const timeUpdater = () => {
        initialTime++;
        const min =
          initialTime > 60
            ? Math.floor(initialTime / 60)
            : 0;
        timeDisplayer.innerHTML = `${
          min ? `${min} m ` : ""
        }${initialTime} s`;
      };

      let timerId = null;

      app.addEventListener("click", (e) => {
        console.log("clicked");
        console.log(e.target.id);
        if (e.target.tagName !== "BUTTON") {
          return;
        }

        if (e.target.id === "start") {
          timerId = setInterval(timeUpdater, 1000);
          sessionStorage.setItem(storeKey, {});
        }
        if (e.target.id === "clear") {
          clearTimeout(timerId);
          sessionStorage.clear(storeKey);
        }
      });
    </script>

    <!-- <script src="src/playground.js" type="module"></script> -->
    <!-- <script src="src/problems.js" type="module"></script> -->
  </body>
</html>
